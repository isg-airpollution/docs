<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head>
  <meta charset="utf-8">
  <meta name="generator" content="quarto-0.2.130">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Air Pollution Group – Best Practices</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>

  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script src="site_libs/quarto-nav/quarto-nav.js"></script>
  <script src="site_libs/quarto-nav/headroom.min.js"></script>
  <meta name="quarto:offset" content="./">
  <script src="site_libs/quarto-search/autocomplete.min.js"></script>
  <script src="site_libs/quarto-search/fuse.min.js"></script>
  <script src="site_libs/quarto-search/quarto-search.js"></script>
  <script src="site_libs/quarto-html/quarto.js"></script>
  <script src="site_libs/quarto-html/popper.min.js"></script>
  <script src="site_libs/quarto-html/tippy.umd.min.js"></script>
  <script src="site_libs/quarto-html/clipboard.min.js"></script>
  <script src="site_libs/quarto-html/anchor.min.js"></script>
  <link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
  <link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
  <script src="site_libs/bootstrap/bootstrap.min.js"></script>
  <link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
  <link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="quarto-search-results"></div>
<header id="quarto-header" class="headroom fixed-top">
<nav class="navbar navbar-expand-lg navbar-light ">
    <div class="container-fluid">
  <a class="navbar-brand" href="./index.html">
    <img src="./logo.png" alt="">
    <span class="navbar-title">Air Pollution Group</span>
  </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./about.html">About</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/quarto-dev/quarto-web"><i class="bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
      </div> <!-- /navcollapse -->
  </div> <!-- /container-fluid -->
</nav>
<nav class="quarto-secondary-nav py-2 d-lg-none d-md-block " data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <div class="container-fluid d-flex justify-content-between">
    <h1 class="quarto-secondary-nav-title mb-0 fs-3 d-inline">Best Practices</h1>
    <button type="button" class="quarto-btn-toggle btn d-lg-none py-0 px-1 d-inline-block border-0 ">
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</nav>
</header>
 <!-- /navbar/sidebar -->
<div class="container-fluid quarto-container d-flex flex-column page-layout-article">
<div class="row flex-fill" id="quarto-content">
  <div id="quarto-sidebar" class="col col-12 col-lg-3 d-lg-flex px-0 pt-0 sidebar collapse sidebar-navigation">
    <nav class="me-lg-auto docked overflow-auto">
    <div class="d-flex px-3 mt-2 flex-shrink-0 align-items-center">
      <div class="sidebar-search">
      <form class="d-flex mb-0">
  <input id="quarto-search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>
      </div>
    </div>
  <div class="sidebar-menu-container"> 
  <ul class="list-unstyled mt-1 px-3">
      <li class="sidebar-item">
  <a href="./get-started.html" class="">Getting started</a>
</li>
      <li class="sidebar-item">
  <a href="./projects.html" class="">Projects</a>
</li>
      <li class="sidebar-item">
  <a href="./best-practice.html" class="active">Best Practices</a>
</li>
      <li class="sidebar-item">
  <a href="./remote-servers.html" class="">Remote Servers</a>
</li>
      <li class="sidebar-item">
  <a href="./add-content.html" class="">Adding Content</a>
</li>
      <li class="sidebar-item">
  <a href="./resources.html" class="">Resources</a>
</li>
  </ul>
  </div>
</nav>
  </div>
  <div id="quarto-toc-sidebar" class=" pt-0 col col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-toc order-last"><nav id="TOC" role="doc-toc">
<h2 id="toc-title">On this page</h2>
<ul>
<li><a href="#self-contained-projects" class="nav-link active" data-scroll-target="#self-contained-projects">Self-Contained Projects</a>
<ul class="collapse">
<li><a href="#file-system-discipline" class="nav-link" data-scroll-target="#file-system-discipline">1. File system discipline</a></li>
<li><a href="#working-directory-intentionality" class="nav-link" data-scroll-target="#working-directory-intentionality">2. Working directory intentionality</a></li>
<li><a href="#file-path-discipline" class="nav-link" data-scroll-target="#file-path-discipline">3. File path discipline</a></li>
<li><a href="#projects-in-practice" class="nav-link" data-scroll-target="#projects-in-practice">Projects in practice</a></li>
</ul></li>
<li><a href="#readme-file" class="nav-link" data-scroll-target="#readme-file">README File</a></li>
<li><a href="#master-script" class="nav-link" data-scroll-target="#master-script">Master Script</a></li>
<li><a href="#file-names" class="nav-link" data-scroll-target="#file-names">File Names</a></li>
<li><a href="#code-style" class="nav-link" data-scroll-target="#code-style">Code Style</a></li>
<li><a href="#package-version-management" class="nav-link" data-scroll-target="#package-version-management">Package Version Management</a></li>
<li><a href="#version-control" class="nav-link" data-scroll-target="#version-control">Version Control</a></li>
</ul>
</nav></div>
  <div class="col mx-auto col-sm-12 col-md-9 col-lg-7 col-xl-7 px-lg-4 pe-xxl-4 ps-xxl-0">
<main>
<header id="title-block-header">
<h1 class="title d-none d-lg-block display-7">Best Practices</h1>
</header>

<section id="self-contained-projects" class="level2">
<h2 class="anchored" data-anchor-id="self-contained-projects">Self-Contained Projects</h2>
<p>Data analyses that involve source code should be placed inside a self-contained directory in one of the network folders. Once the analysis is finished, this self-contained folder should be stored in the appropriate <code>analysis/</code> folder inside the <code>airpollution</code> network folder, if it was not there already.</p>
<p>The names of these project folders should start with your name initials in capital letters followed by an underscore and a short informative name (i.e.&nbsp;<code>SO_physical-activity</code>).</p>
<p>A self-contained folder must contain all the files, data and code necessary to obtain the final results of the analysis. Any resident R script is written assuming that it will be run from a fresh R process with working directory set to the project’s root directory. It creates everything it needs, in its own workspace or folder, and it touches nothing it did not create. This convention guarantees that the project can be moved around on your computer or onto other computers and will still work.</p>
<p>In order to make a project self-contained, it must therefore satisfy the following conditions:</p>
<section id="file-system-discipline" class="level3">
<h3 class="anchored" data-anchor-id="file-system-discipline">1. File system discipline</h3>
<p>All files related to a single project must be in a single folder. This applies to data, code, figures, notes, etc. Depending on project complexity, you may organize files into sub-folders.</p>
<p>Different projects will require different folder structures but some common minimal rules should be set to facilitate file navigation across projects among all team members.</p>
<ul>
<li><p>The <code>data/</code> folder should contain all data files (.csv, .xlsx, etc.). If appropriate, consider dividing data files into <code>data-raw/</code> and <code>data-processed/</code> sub-folders.</p></li>
<li><p>The <code>R/</code> or <code>src/</code> folder should contain all scripts in the analysis.</p></li>
<li><p>A <code>README.md</code> file should be included in the root of every data analysis project. See next section for details.</p></li>
</ul>
<p>A common project structure could be:</p>
<pre><code>.
├── data
│&nbsp;&nbsp; └── raw-data.csv
├── master-script.R
├── output
│&nbsp;&nbsp; ├── manuscript.md
│&nbsp;&nbsp; ├── plot1.png
│&nbsp;&nbsp; └── plot2.png
├── R
│&nbsp;&nbsp; ├── fit-models.R
│&nbsp;&nbsp; └── read-data.R
├── README.md
├── reports
│&nbsp;&nbsp; └── exploratory-report.Rmd
└── SO_my-analysis.Rproj</code></pre>
<p>Note that there is a file with the extension <code>.Rproj</code>. This file is created automatically by RStudio when you create an RStudio project. It helps RStudio know that this folder is a project and that the working directory of the associated R session should be the root of this folder. See <a href="./best-practice.html#">Projects in Practice</a> for more details.</p>
<p>Other common folders inside of projects are <code>figs/</code> for figures meant to be shared, <code>documents/</code> for relevant papers, or <code>reports/</code> for exploratory data analysis reports.</p>
</section>
<section id="working-directory-intentionality" class="level3">
<h3 class="anchored" data-anchor-id="working-directory-intentionality">2. Working directory intentionality</h3>
<p>When working on Project A, the working directory must be set to Project A’s root folder. Moreover, every time you open a project, it should start in a fresh R session to avoid any interactions with code you might have run beforehand. Please also note that <code>rm(list = ls())</code> does not make a fresh R session.</p>
<p>Ideally, this is achieved via development workflow and tooling, not by placing calls to <code>setwd()</code> with absolute paths into the code. I strongly recommend using an Integrated Development Environment (IDE) that supports a project-based workflow. This eliminates the tension between your development convenience and the portability of the code. More details in the next section.</p>
<p>A consequence of this approach is that you should never save your workspace to .RData on exit. This can be disabled by default in RStudio’s Global and Project Options.</p>
<p><img src="global-options.jpeg" class="img-fluid"></p>
<p><img src="project-options.jpeg" class="img-fluid"></p>
</section>
<section id="file-path-discipline" class="level3">
<h3 class="anchored" data-anchor-id="file-path-discipline">3. File path discipline</h3>
<p><em>No absolute paths should appear in your scripts</em>. Absolute paths are specific to your machine. That is why setting your working directory by baking <code>setwd("C:\Users\sergio\path\that\only\I\have")</code> into your scripts will not work in other computer. If you change computers or someone else tries to run your analysis on her machine, the code will not work.</p>
<p>All paths must be relative to the project’s root folder. That is why we need to include all the necessary files inside our project’s folder. With this setup, we can move the project folder to different folders in our computer, or even to different computers entirely.</p>
<p>One last issue to note regarding file paths is that the syntax will be different in different operating systems, even for relative paths. The {<a href="https://github.com/jennybc/here_here">here</a>} package provides a simple way to wrap file paths so that they work across any operating system and integrates very smoothly into this project-oriented workflow.</p>
</section>
<section id="projects-in-practice" class="level3">
<h3 class="anchored" data-anchor-id="projects-in-practice">Projects in practice</h3>
<section id="using-rstudio" class="level4">
<h4 class="anchored" data-anchor-id="using-rstudio">Using RStudio</h4>
<p>To create a new project use the Create Project command (available on the Projects menu and on the global toolbar). You can create an RStudio project in a brand new directory or in an existing directory where you already have R code and data. This creates a project file (with an .Rproj extension) within the project directory that identifies this folder as the root folder of your project.</p>
<p>There are several ways to open an existing project:</p>
<ul>
<li><p>Using the Open Project command (available from both the Projects menu and the Projects toolbar) to browse for and select an existing project file (e.g.&nbsp;MyProject.Rproj).</p></li>
<li><p>Selecting a project from the list of most recently opened projects (also available from both the Projects menu and toolbar).</p></li>
<li><p>Double-clicking on the project file within the system shell (e.g.&nbsp;Windows Explorer, OSX Finder, etc.).</p></li>
</ul>
<p>When opening an RStudio project, RStudio starts a fresh R session and sets the current working directory to the root of the project, so there is no need to call <code>setwd()</code> yourself.</p>
<p>See <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects">this tutorial</a> for more detailed instructions.</p>
</section>
<section id="using-the-usethis-package" class="level4">
<h4 class="anchored" data-anchor-id="using-the-usethis-package">Using the {usethis} package</h4>
<p>The {<a href="https://github.com/r-lib/usethis">usethis</a>} R package provides a set of functions to create and manage R projects interactively. They do not need to be RStudio projects.</p>
<p>Useful functions to be run interactively in the R command line:</p>
<ul>
<li><p>Create a new project with <code>usethis::create_project()</code> and the absolute path where you want to create the project as the argument.</p></li>
<li><p>Open an existing project with <code>usethis::proj_activate()</code> and the absolute path of the project as argument.</p></li>
</ul>
</section>
<section id="using-other-ide" class="level4">
<h4 class="anchored" data-anchor-id="using-other-ide">Using other IDE</h4>
<p>RStudio may not work well when working remotely with the ISGlobal servers. Other IDE options for programming with R are <a href="https://renkun.me/2019/12/11/writing-r-in-vscode-a-fresh-start/">VScode</a> and <a href="https://solmos.netlify.app/post/2020-07-06-emacs-for-statisticians/emacs-for-statisticians/">Emacs + ESS</a>, which allow running R on remote servers over SSH but are more difficult to set up and use. You can use the {usethis} package to create and manage R projects with these IDEs.</p>
</section>
</section>
</section>
<section id="readme-file" class="level2">
<h2 class="anchored" data-anchor-id="readme-file">README File</h2>
<p>All data analysis projects should contain a README file that helps collaborators, as well as future you, understand what the project does and how it does it. Ideally, this file should be a Markdown document (<code>README.md</code>) or any other plain text file (<code>.txt</code>, <code>.org</code>).</p>
<p>The README file should contain at least the following information:</p>
<ul>
<li><p>Author/s: Who wrote the project.</p></li>
<li><p>Overview: A paragraph or two explaining the main objectives of the project.</p></li>
<li><p>Project structure: How files are organized inside the project.</p></li>
<li><p>Reproducibility: Instructions on how to independently obtain the results.</p></li>
</ul>
</section>
<section id="master-script" class="level2">
<h2 class="anchored" data-anchor-id="master-script">Master Script</h2>
<p>A master script should be provided at the root of the project which produces the final results of the analysis.</p>
<p>Instead of runing the code in each script “manually” and saving the results, you should have a single master script that orchestrates the whole process, thus making sure that all the results are in-sync. Moreover, a master script can help a colleague looking at your analysis understand how to reproduce your results.</p>
<p>There are a few options but a bare-bones approach can be to create a separate script that sources each of your analysis scripts in the right order.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="do">## master-script.R at the root of your project</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(mgcv)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"R/read-data.R"</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"R/fit-models.R"</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"R/create-tables.R"</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"R/create-figures.R"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>There are more sophisticated and helpful ways to provide a master script. Check the <a href="">targets</a> R package and <a href="">GNU Makefile</a>.</p>
</section>
<section id="file-names" class="level2">
<h2 class="anchored" data-anchor-id="file-names">File Names</h2>
<p>Three principles for file names:</p>
<ul>
<li>Machine readable:
<ul>
<li>Avoid spaces, punctuation, accented characters</li>
<li>Case sensitive, i.e.&nbsp;<code>foo.csv != Foo.csv</code></li>
</ul></li>
<li>Human readable:
<ul>
<li>Easy to figure out what something is, based on its name</li>
</ul></li>
<li>Plays well with default ordering:
<ul>
<li>Left-pad numbers with 0, i.e.&nbsp;<code>01_read-data.R</code> instead of <code>1_read-data.R</code></li>
<li>Use the ISO 8601 standard for dates, i.e.&nbsp;<code>YYYY-MM-DD_report.Rmd</code></li>
</ul></li>
</ul>
</section>
<section id="code-style" class="level2">
<h2 class="anchored" data-anchor-id="code-style">Code Style</h2>
<p>Choose a code style and be consistent. See <a href="https://style.tidyverse.org/">this</a> or <a href="https://google.github.io/styleguide/Rguide.html">this</a> for some common style guides. One rule that can greatly improve readability is not to exceed 80 characters in any of the lines of your script.</p>
</section>
<section id="package-version-management" class="level2">
<h2 class="anchored" data-anchor-id="package-version-management">Package Version Management</h2>
<p>You can use the renv R package to document and reproduce the package versions you used in your analysis.</p>
<p>The general workflow is:</p>
<ol type="1">
<li><p>Develop your analysis as normal, installing and removing R packages as they are needed for the project.</p></li>
<li><p>Call <code>renv::snapshot()</code> to save the state of the project library to the lockfile (called <code>renv.lock</code>) once you think the analysis is done.</p></li>
<li><p>Call <code>renv::restore()</code> to restore the state of the project library.</p></li>
</ol>
<p>For further details check <a href="https://rstudio.github.io/renv/articles/renv.html">renv’s documentation</a>.</p>
</section>
<section id="version-control" class="level2">
<h2 class="anchored" data-anchor-id="version-control">Version Control</h2>
<p>Use git and GitHub for version control whenever possible. This allows to track all changes in the code and revert to a previous state in case of trouble. More importantly, it can make sharing and collaborating with others much easier.</p>
<p>If you use GitHub, include the repository URL in the README file.</p>
<p>If you are new to version control, you can get started by reading <a href="https://happygitwithr.com/">Happy Git and GitHub for the useR</a>.</p>

<!-- -->
</section>
<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    setTimeout(function() {
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    window.tippy(el, {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    }); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      const id = new URL(ref.getAttribute('href')).hash.replace(/^#/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</main>
<div class="page-navigation page-navigation-docked">
  <div class="nav-page nav-page-previous">
  </div>
  <div class="nav-page nav-page-next">
  </div>
</div>
</div> <!-- /main column -->
</div> <!-- /row -->
</div> <!-- /container fluid -->


</body></html>