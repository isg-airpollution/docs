<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang=""><head>
  <meta charset="utf-8">
  <meta name="generator" content="quarto-0.2.130">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Air Pollution Group – Data Analysis Projects</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
  </style>

  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <script src="site_libs/quarto-nav/quarto-nav.js"></script>
  <script src="site_libs/quarto-nav/headroom.min.js"></script>
  <meta name="quarto:offset" content="./">
  <script src="site_libs/quarto-search/autocomplete.min.js"></script>
  <script src="site_libs/quarto-search/fuse.min.js"></script>
  <script src="site_libs/quarto-search/quarto-search.js"></script>
  <script src="site_libs/quarto-html/quarto.js"></script>
  <script src="site_libs/quarto-html/popper.min.js"></script>
  <script src="site_libs/quarto-html/tippy.umd.min.js"></script>
  <script src="site_libs/quarto-html/clipboard.min.js"></script>
  <script src="site_libs/quarto-html/anchor.min.js"></script>
  <link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
  <link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
  <script src="site_libs/bootstrap/bootstrap.min.js"></script>
  <link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
  <link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
<div id="quarto-search-results"></div>
<header id="quarto-header" class="headroom fixed-top">
<nav class="navbar navbar-expand-lg navbar-light ">
    <div class="container-fluid">
  <a class="navbar-brand" href="./index.html">
    <img src="./logo.png" alt="">
    <span class="navbar-title">Air Pollution Group</span>
  </a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
      <div class="collapse navbar-collapse" id="navbarCollapse">
        <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./projects.html">Projects</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">Team</a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/quarto-dev/quarto-web"><i class="bi-github" role="img">
</i> 
 </a>
  </li>  
</ul>
      </div> <!-- /navcollapse -->
  </div> <!-- /container-fluid -->
</nav>
<nav class="quarto-secondary-nav py-2 d-lg-none d-md-block " data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <div class="container-fluid d-flex justify-content-between">
    <h1 class="quarto-secondary-nav-title mb-0 fs-3 d-inline">Data Analysis Projects</h1>
    <button type="button" class="quarto-btn-toggle btn d-lg-none py-0 px-1 d-inline-block border-0 ">
      <i class="bi bi-chevron-right"></i>
    </button>
  </div>
</nav>
</header>
 <!-- /navbar/sidebar -->
<div class="container-fluid quarto-container d-flex flex-column page-layout-article">
<div class="row flex-fill" id="quarto-content">
  <div id="quarto-sidebar" class="col col-12 col-lg-3 d-lg-flex px-0 pt-0 sidebar collapse sidebar-navigation">
    <nav class="me-lg-auto docked overflow-auto">
    <div class="d-flex px-3 mt-2 flex-shrink-0 align-items-center">
      <div class="sidebar-search">
      <form class="d-flex mb-0">
  <input id="quarto-search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>
      </div>
    </div>
  <div class="sidebar-menu-container"> 
  <ul class="list-unstyled mt-1 px-3">
      <li class="sidebar-item">
  <a href="./get-started.html" class="">Getting Started</a>
</li>
      <li class="sidebar-item">
  <a href="./network-folders.html" class="">Network Folders</a>
</li>
      <li class="sidebar-item">
  <a href="./project-structure.html" class="active">Data Analysis Projects</a>
</li>
      <li class="sidebar-item">
  <a href="./reproducible-research.html" class="">Reproducible Research</a>
</li>
      <li class="sidebar-item">
  <a href="./style-guide.html" class="">Style Guide</a>
</li>
      <li class="sidebar-item">
  <a href="./version-control.html" class="">Version Control</a>
</li>
      <li class="sidebar-item">
  <a href="./getting-help.html" class="">Getting help with R</a>
</li>
      <li class="sidebar-item">
  <a href="./remote-servers.html" class="">HPC Cluster</a>
</li>
      <li class="sidebar-item">
  <a href="./add-content.html" class="">Adding Content</a>
</li>
      <li class="sidebar-item">
  <a href="./resources.html" class="">Resources</a>
</li>
  </ul>
  </div>
</nav>
  </div>
  <div id="quarto-toc-sidebar" class=" pt-0 col col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-toc order-last"><nav id="TOC" role="doc-toc">
<h2 id="toc-title">On this page</h2>
<ul>
<li><a href="#basic-structure" class="nav-link active" data-scroll-target="#basic-structure">Basic Structure</a>
<ul class="collapse">
<li><a href="#readme.md" class="nav-link" data-scroll-target="#readme.md"><code>README.md</code></a></li>
<li><a href="#data" class="nav-link" data-scroll-target="#data"><code>data/</code></a></li>
<li><a href="#r" class="nav-link" data-scroll-target="#r"><code>R/</code></a></li>
<li><a href="#output" class="nav-link" data-scroll-target="#output"><code>output/</code></a></li>
</ul></li>
<li><a href="#projects-in-practice" class="nav-link" data-scroll-target="#projects-in-practice">Projects in practice</a>
<ul class="collapse">
<li><a href="#using-rstudio" class="nav-link" data-scroll-target="#using-rstudio">Using RStudio</a></li>
<li><a href="#using-other-ide" class="nav-link" data-scroll-target="#using-other-ide">Using other IDE</a></li>
<li><a href="#using-the-usethis-package" class="nav-link" data-scroll-target="#using-the-usethis-package">Using the {usethis} package</a></li>
</ul></li>
</ul>
</nav></div>
  <div class="col mx-auto col-sm-12 col-md-9 col-lg-7 col-xl-7 px-lg-4 pe-xxl-4 ps-xxl-0">
<main>
<header id="title-block-header">
<h1 class="title d-none d-lg-block display-7">Data Analysis Projects</h1>
</header>

<p>Data analyses that involve source code should be placed inside a self-contained directory in one of the network folders. The names of these project folders should start with your name initials in capital letters followed by an underscore and a short informative name (i.e.&nbsp;<code>SO_physical-activity</code>).</p>
<p>A self-contained project must contain all the files, data and code necessary to obtain the final results of the analysis. It creates everything it needs, in its own workspace or folder, and it touches nothing it did not create. This convention guarantees that the project can be moved around on your computer or onto other computers and will still work. See <a href="./reproducible-research.html">Reproducible Research</a> for more details on why this is important.</p>
<div class="callout-note callout callout-style-simple">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>Any resident R script is written assuming that it will be run from a fresh R process with working directory set to the project’s root directory.</p>
</div>
</div>
</div>
<section id="basic-structure" class="level2">
<h2 class="anchored" data-anchor-id="basic-structure">Basic Structure</h2>
<p>Different projects will require different folder structures but some common minimal rules should be set to facilitate file navigation across projects among all team members.</p>
<ul>
<li><p>A <code>README.md</code> file describing the project.</p></li>
<li><p>A <code>data/</code> folder containing all data files.</p></li>
<li><p>An <code>R/</code> or <code>src/</code> folder containing all scripts in the analysis.</p></li>
<li><p>An <code>output/</code> folder with the output of the project.</p></li>
</ul>
<p>All these files/folders should be at the root of the project.</p>
<section id="readme.md" class="level3">
<h3 class="anchored" data-anchor-id="readme.md"><code>README.md</code></h3>
<p>All data analysis projects should contain a README file that helps collaborators, as well as future you, understand what the project does and how it does it. The use of <a href="https://www.markdownguide.org/">Markdown</a> for these files is strongly encouraged.</p>
<p>The README file should contain at least the following information:</p>
<ul>
<li><p>Author/s: Who is involved in the analysis.</p></li>
<li><p>Objectives: A paragraph or two explaining the main objectives of the analysis.</p></li>
<li><p>Project structure: How files are organized inside the project.</p></li>
<li><p>Reproducibility: Instructions on how to independently obtain the results.</p></li>
</ul>
</section>
<section id="data" class="level3">
<h3 class="anchored" data-anchor-id="data"><code>data/</code></h3>
<p>All raw data files (.csv, .xlsx, etc.) should be placed in a folder named <code>data/</code>. If appropriate, consider creating two sub-directories <code>data/raw/</code> and <code>data/processed/</code>.</p>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>When using Git and GitHub for version control, add this folder to the .gitignore file from the start so that possibly sensitive data is not tracked by Git and accidentally uploaded to GitHub.</p>
</div>
</div>
</section>
<section id="r" class="level3">
<h3 class="anchored" data-anchor-id="r"><code>R/</code></h3>
<p>All R scripts should be placed inside a folder named <code>R/</code>. If you are using a programming language other than R, name this folder <code>src/</code>.</p>
<p>The code underlying the analysis should be divided into several scripts of a few hundred lines grouped by specific tasks, i.e.&nbsp;<code>read-data.R</code>, <code>fit-models.R</code>, …</p>
<p>Each script should be standalone. That is, you should be able to run a given script without having to run any other script beforehand. For instance, if you save the data frames that you created in <code>read-data.R</code> inside the <code>data/processed/</code> folder, you should then explicitly read these files from <code>data/processed/</code> in any other script that uses these data frames. Do not assume that the <code>read-data.R</code> script has been evaluated in any subsequent script.</p>
<div class="callout-note callout callout-style-simple">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>Also note that all file paths in your scripts should be relative to the root of the project. Do not use absolute file paths unless strictly necessary. See <a href="./reproducible-research.html">Reproducible Research</a> for more details.</p>
</div>
</div>
</div>
</section>
<section id="output" class="level3">
<h3 class="anchored" data-anchor-id="output"><code>output/</code></h3>
<p>All output files created by code that are meant to be publicly shared should be stored inside the <code>output/</code> folder. These output files could include the manuscript of the paper associated with the analysis, the PNG files with the figures used in the paper, or any other output file meant to be shared with others.</p>
</section>
</section>
<section id="projects-in-practice" class="level2">
<h2 class="anchored" data-anchor-id="projects-in-practice">Projects in practice</h2>
<p>A common project structure could be:</p>
<pre><code>.
├── data
│&nbsp;&nbsp; └── raw-data.csv
├── master-script.R
├── output
│&nbsp;&nbsp; ├── manuscript.md
│&nbsp;&nbsp; ├── plot1.png
│&nbsp;&nbsp; └── plot2.png
├── R
│&nbsp;&nbsp; ├── fit-models.R
│&nbsp;&nbsp; └── read-data.R
├── README.md
├── reports
│&nbsp;&nbsp; └── exploratory-report.Rmd
└── SO_my-analysis.Rproj</code></pre>
<p>Other common folders inside of projects are <code>figs/</code> for figures meant to be shared, <code>documents/</code> for relevant papers, or <code>reports/</code> for exploratory data analysis reports.</p>
<div class="callout-note callout callout-style-simple callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Master script
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that there is a file called <code>master-script.R</code> in the root of the project. This file orchestrates all the scripts in the <code>R/</code> folder to produce the results of the analysis. See the <a href="./reproducible-research.html">Reproducible Research</a> section for more details.</p>
</div>
</div>
<section id="using-rstudio" class="level3">
<h3 class="anchored" data-anchor-id="using-rstudio">Using RStudio</h3>
<p>To create a new project use the Create Project command (available on the Projects menu and on the global toolbar). You can create an RStudio project in a brand new directory or in an existing directory where you already have R code and data. This creates a project file (<code>.Rproj</code>) within the project directory that tells RStudio this is the root folder of your project.</p>
<p>There are several ways to open an existing project:</p>
<ul>
<li><p>Using the Open Project command (available from both the Projects menu and the Projects toolbar) to browse for and select an existing project file (e.g.&nbsp;MyProject.Rproj).</p></li>
<li><p>Selecting a project from the list of most recently opened projects (also available from both the Projects menu and toolbar).</p></li>
<li><p>Double-clicking on the project file within the system file explorer (e.g.&nbsp;Windows Explorer, OSX Finder, etc.).</p></li>
</ul>
<div class="callout-note callout callout-style-simple">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-body-container">
<p>When opening an RStudio project, RStudio starts a fresh R session and sets the current working directory to the root of the project, so there is no need to call <code>setwd()</code> yourself. See why this is important in <a href="./reproducible-research.html">Reproducible Research</a>.</p>
</div>
</div>
</div>
<p>See <a href="https://support.rstudio.com/hc/en-us/articles/200526207-Using-Projects">this RStudio tutorial</a> for more detailed instructions.</p>
</section>
<section id="using-other-ide" class="level3">
<h3 class="anchored" data-anchor-id="using-other-ide">Using other IDE</h3>
<p>IDEs make it easy to work within this project-oriented workflow. You may prefer to use an IDE other than RStudio, such as <a href="https://renkun.me/2019/12/11/writing-r-in-vscode-a-fresh-start/">VScode</a> or <a href="https://solmos.netlify.app/post/2020-07-06-emacs-for-statisticians/emacs-for-statisticians/">Emacs + ESS</a>, which come with their own project-related tools. In fact, these editors may be preferable when working on the remote cluster as they allow interacting with remote R sessions over SSH.</p>
</section>
<section id="using-the-usethis-package" class="level3">
<h3 class="anchored" data-anchor-id="using-the-usethis-package">Using the {usethis} package</h3>
<p>The {<a href="https://github.com/r-lib/usethis">usethis</a>} R package provides a set of functions to create and manage R projects interactively. They do not need to be RStudio projects.</p>
<p>Useful functions to be run interactively in the R command line:</p>
<ul>
<li><p>Create a new project with <code>usethis::create_project()</code> and the absolute path where you want to create the project as the argument.</p></li>
<li><p>Open an existing project with <code>usethis::proj_activate()</code> and the absolute path of the project as argument.</p></li>
</ul>

<!-- -->
</section>
</section>
<script type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    setTimeout(function() {
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    window.tippy(el, {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    }); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      const id = new URL(ref.getAttribute('href')).hash.replace(/^#/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</main>
<div class="page-navigation page-navigation-docked">
  <div class="nav-page nav-page-previous">
  </div>
  <div class="nav-page nav-page-next">
  </div>
</div>
</div> <!-- /main column -->
</div> <!-- /row -->
</div> <!-- /container fluid -->


</body></html>